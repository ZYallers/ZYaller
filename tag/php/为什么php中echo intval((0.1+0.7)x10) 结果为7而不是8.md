# 为什么php中echo intval((0.1+0.7)x10) 结果为7而不是8

如果你仔细看过在PHP手册中，对于浮点数据类型的说明，就会看到其中有专门的一个警告提示，就谈到这个问题：关于浮点数精度的警告。

显然简单的十进制分数如同0.1或0.7不能在不丢失一点点精度的情况下转换为内部二进制的格式。这就会造成混乱的结果：例如，floor((0.1+0.7)*10)通常会返回 7 而不是预期中的8，因为该结果内部的表示其实是类似 7.9。 

这和一个事实有关，那就是不可能精确的用有限位数表达某些十进制分数。例如，十进制的    1/3 变成了 0.3。 

所以永远不要相信浮点数结果精确到了最后一位，也永远不要比较两个浮点数是否相等。如果确实需要更高的精度，应该使用任意精度数学函数或者 gmp 函数。

实际上，并不是php会有这种现象，对于其他计算机语言，类似的浮点数问题也是差不多的。

**补充：**

如果要想输出预期的8，可以这样改：

```php
echo intval( strval( (0.1+0.7) * 10 ) );
```
先把浮点数转换为字符串后，再转成整数。
